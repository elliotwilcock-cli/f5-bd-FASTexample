definitions:
  tenant_name:
    title: What is the tenant name?
    description: The tenant is the high-level grouping in an AS3 declaration. FAST deploys all configuration for a given tenant in a BIG-IP partition of the same name.
  app_name:
    title: What is the application name?
    description: The application is the low-level grouping in an AS3 declaration. FAST deploys all configuration for a given application in a BIG-IP folder within the tenant partition.
  app_fqdn:
    title: What is the application's FQDN?
    description: The application's fqdn is necessary for.
  virtual_address:
    title: What IP address do you want to use for the virtual server?
    description: This IP address, combined with the port you specify below, becomes the BIG-IP virtual server address and port, which clients use to access the application. The system uses this IP:Port for distributing requests to the web servers.
  virtual_port:
    title: What TCP port do you want to use for the virtual server?
  pool_members:
    title: Server Addresses
    description: Add the IP addresses of a pool member.
  pool_port:
    title: What TCP port do you want to use for the pool members?
  enable_tls_server:
    title: TLS Server
    description: Enable TLS server to decrypt client-side connections.
    type: boolean
  make_tls_server_profile:
    title: Automatically manage the TLS server profile
    type: boolean
  tls_cert_name:
    title: Specify the name of an existing BIG-IP SSL certificate.
    enumFromBigip: 'sys/crypto/cert'
  tls_key_name:
    title: Specify the name of an existing BIG-IP SSL key.
    enumFromBigip: 'sys/crypto/key'
  enable_tls_client:
    title: TLS Client
    description: Enable TLS client to encrypt server-side connections.
    type: boolean
  make_tls_client_profile:
    title: Automatically manage the TLS client profile
    type: boolean
parameters:
  virtual_port: 443
  enable_pool: true
  make_pool: true
  pool_port: 80
  make_monitor: true
  enable_tls_server: true
  make_tls_server_profile: true
  enable_tls_client: false
  make_tls_client_profile: true
  tls_cert_name: /Common/default.crt
  tls_key_name: /Common/default.key  
template: |
  {
   "class":"ADC",
   "schemaVersion":"3.11.0",
   "id":"urn:uuid:2c8b29bb-f318-4631-961a-94baea550b36",
   "TestTenant":{
      "class":"Tenant",
      "MyTestApp":{
         "class":"Application",
         "template":"http",
         "sharepoint-pool":{
            "members":[
               {
                  "addressDiscovery":"static",
                  "servicePort":80,
                  "serverAddresses":[
                     "10.0.0.1",
                     "10.0.0.2"
                  ]
               }
            ],
            "monitors":[
               {
                  "use":"/TestTenant/MyTestApp/sharepoint-monitor"
               }
            ],
            "class":"Pool"
         },
         "serviceMain":{
            "layer4":"tcp",
            "pool":"sharepoint-pool",
            "translateServerAddress":true,
            "translateServerPort":true,
            "class":"Service_HTTP",
            "profileHTTPAcceleration":{
               "use":"sharepoint-cache-optimize"
            },
            "profileHTTP":{
               "use":"sharepoint-http"
            },
            "profileHTTPCompression":{
               "use":"sharepoint-httpcompression"
            },
            "profileMultiplex":{
               "use":"sharepoint-oneconnect"
            },
            "profileTCP":{
               "egress":{
                  "use":"sharepoint-tcp-lan"
               },
               "ingress":{
                  "use":"sharepoint-tcp-wan"
               }
            },
            "virtualAddresses":[
               "0.0.0.0"
            ],
            "virtualPort":8080,
            "persistenceMethods":[
               
            ],
            "snat":"auto"
         },
         "sharepoint-monitor":{
            "adaptive":false,
            "interval":5,
            "dscp":0,
            "send":"GET / HTTP/1.1\r\nHost: www.myapp.com\r\nConnection: Close\r\n\r\n",
            "receive":"X-SharePointHealthScore: [0-5].",
            "timeUntilUp":0,
            "timeout":16,
            "class":"Monitor",
            "monitorType":"http",
            "targetAddress":"",
            "targetPort":0
         },
         "sharepoint-http":{
            "proxyType":"reverse",
            "class":"HTTP_Profile"
         },
         "sharepoint-httpcompression":{
            "class":"HTTP_Compress"
         },
         "sharepoint-oneconnect":{
            "class":"Multiplex_Profile",
            "maxConnections":5000,
            "maxConnectionAge":3600,
            "maxConnectionReuse":20000,
            "idleTimeoutOverride":900,
            "connectionLimitEnforcement":"idle",
            "sharePools":true
         },
         "sharepoint-tcp-lan":{
            "class":"TCP_Profile"
         },
         "sharepoint-tcp-wan":{
            "class":"TCP_Profile"
         },
         "sharepoint-cache-optimize":{
            "parentProfile":{
               "bigip":"/Common/optimized-caching"
            },
            "class":"HTTP_Acceleration_Profile"
         }
      }
   }
  }